function validInput(e,t,n,r){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[0],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validEmail(e,t,n){e.addEventListener("input",()=>{-1===e.value.indexOf("@")?(console.log(e.parentElement.parentElement),e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=n[1],e.parentElement.classList.add("form__input-invalid"),t.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function passValid(e,t,n,r){t.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===t.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=r[0],t.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):e.value!==t.value||t.value!==e.value?(t.parentElement.parentElement.querySelector(".form__error").style.display="block",t.parentElement.parentElement.querySelector(".form__error").textContent=r[3],t.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))}),e.addEventListener("input",()=>{console.log(t.value+" "+e.value),""===e.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[0],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):t.value!==e.value||e.value!==t.value?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[3],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"),t.parentElement.parentElement.querySelector(".form__error").style.display="none",t.parentElement.classList.remove("form__input-invalid"))})}function validPhone(e,t,n,r){e.addEventListener("input",()=>{e.value===t?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[0],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):isNaN(e.value)?(e.parentElement.parentElement.querySelector(".form__error").style.display="block",e.parentElement.parentElement.querySelector(".form__error").textContent=r[4],e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):(e.parentElement.parentElement.querySelector(".form__error").style.display="none",e.parentElement.classList.remove("form__input-invalid"))})}function validCheckbox(e,t,n){e.addEventListener("input",()=>{e.checked===t?(e.parentElement.classList.add("form__input-invalid"),n.classList.add("disabled")):e.parentElement.classList.remove("form__input-invalid")})}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".header__burger");var e=document.querySelectorAll(".header__menu-item");const n=document.querySelector(".header__menu"),r=document.querySelector(".cookies-alert");var l=document.querySelector(".cookies-alert__btn");let a=["Поле не заполнено","ВВЕДИТЕ ВАШ E-MAIL В ПРАВИЛЬНОМ ФОРМАТЕ.","Некорректный ИИН","Пароли должны совпадать","Некорректное значение"];if(document.querySelector(".access__form")){var i=document.querySelector(".access__form"),o=i.querySelectorAll("input");const s=i.querySelector("[name='companyName']"),m=i.querySelector("[name='iin']"),d=i.querySelector("[name='email']"),c=i.querySelector("[name='phone']"),p=i.querySelector("[name='password']"),u=i.querySelector("[name='confirmPassword']"),_=i.querySelector("[name='agreeOfert']"),E=i.querySelector('[name="agreePersonal"]'),v=i.querySelector("[type='submit']");v.classList.add("disabled"),validInput(s,"",v,a),validPhone(m,"",v,a),validEmail(d,v,a),validPhone(c,"",v,a),passValid(p,u,v,a),validInput(u,"",v,a),validCheckbox(_,!1,v),validCheckbox(E,!1,v),o.forEach(e=>{e.addEventListener("input",()=>{s.parentElement.classList.contains("form__input-invalid")||""===s.value||s.parentElement.classList.contains("form__input-invalid")||""===s.value||d.parentElement.classList.contains("form__input-invalid")||""===d.value||c.parentElement.classList.contains("form__input-invalid")||""===c.value||p.parentElement.classList.contains("form__input-invalid")||""===p.value||u.parentElement.classList.contains("form__input-invalid")||""===u.value||_.parentElement.classList.contains("form__input-invalid")||""===_.value||E.parentElement.classList.contains("form__input-invalid")||""===E.value?v.classList.add("disabled"):v.classList.remove("disabled")})}),i.addEventListener("submit",e=>{s.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),s.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),d.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),c.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),p.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),u.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),_.parentElement.classList.contains("form__input-invalid")&&e.preventDefault(),E.parentElement.classList.contains("form__input-invalid")&&e.preventDefault()}),v.addEventListener("click",()=>{""===s.value&&(s.parentElement.classList.add("form__input-invalid"),s.parentElement.parentElement.querySelector(".form__error").style.display="block",s.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===m.value&&(m.parentElement.classList.add("form__input-invalid"),m.parentElement.parentElement.querySelector(".form__error").style.display="block",m.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),-1===d.value.indexOf("@")&&(d.parentElement.classList.add("form__input-invalid"),d.parentElement.parentElement.querySelector(".form__error").style.display="block",d.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===c.value&&(c.parentElement.classList.add("form__input-invalid"),c.parentElement.parentElement.querySelector(".form__error").style.display="block",c.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===p.value&&(p.parentElement.classList.add("form__input-invalid"),p.parentElement.parentElement.querySelector(".form__error").style.display="block",p.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===u.value&&(u.parentElement.classList.add("form__input-invalid"),u.parentElement.parentElement.querySelector(".form__error").style.display="block",u.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),!1===_.checked&&_.parentElement.classList.add("form__input-invalid"),!1===E.checked&&E.parentElement.classList.add("form__input-invalid")})}if(document.querySelector(".questions__form")){o=document.querySelector(".questions__form"),i=o.querySelectorAll("input");const y=o.querySelector("[name='companyName']"),f=o.querySelector("[name='email']"),L=o.querySelector('[name="agreePersonal"]'),q=o.querySelector('[name="message"]'),S=o.querySelector("[type='submit']");validInput(y,"",S,a),validEmail(f,S,a),validInput(q,"",S,a),validCheckbox(L,!1,S),i.forEach(e=>{e.addEventListener("input",()=>{y.parentElement.classList.contains("form__input-invalid")||f.parentElement.classList.contains("form__input-invalid")||L.parentElement.classList.contains("form__input-invalid")||q.parentElement.classList.contains("form__input-invalid")?S.classList.add("disabled"):S.classList.remove("disabled")})}),S.classList.add("disabled"),S.addEventListener("click",()=>{""===y.value&&(y.parentElement.classList.add("form__input-invalid"),y.parentElement.parentElement.querySelector(".form__error").style.display="block",y.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===f.value?(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):-1===f.value.indexOf("@")&&(f.parentElement.classList.add("form__input-invalid"),f.parentElement.parentElement.querySelector(".form__error").style.display="block",f.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===L.checked&&L.parentElement.classList.add("form__input-invalid"),""===q.value&&(q.parentElement.classList.add("form__input-invalid"),q.parentElement.parentElement.querySelector(".form__error").style.display="block",q.parentElement.parentElement.querySelector(".form__error").textContent=a[0])})}if(t.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active")}),e.forEach(e=>{e.addEventListener("click",()=>{t.classList.toggle("active"),n.classList.toggle("active")})}),document.cookie.indexOf("cookieOn")<0&&r.classList.add("active"),l.addEventListener("click",()=>{r.classList.remove("active"),document.cookie="cookieOn=true"}),document.querySelector(".recovery")){o=document.querySelector(".recovery");const b=o.querySelector("[type='email']"),k=o.querySelector("[name='agreePersonal']"),x=o.querySelector("[type='submit'");x.classList.add("disabled"),validEmail(b,x,a),validCheckbox(k,x,a),o.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{-1===b.value.indexOf("@")||!1===k.checked?(b.parentElement.classList.add("form__input-invalid"),x.classList.add("disabled")):x.classList.remove("disabled")})}),o.addEventListener("submit",e=>{b.value.indexOf("@")<=0?(b.parentElement.classList.add("form__input-invalid"),b.parentElement.parentElement.querySelector(".form__error").style.display="block",b.parentElement.parentElement.querySelector(".form__error").textContent=a[1],e.preventDefault()):b.parentElement.classList.remove("form__input-invalid"),!1===k.checked?(k.parentElement.classList.add("form__input-invalid"),e.preventDefault()):b.parentElement.classList.remove("form__input-invalid")})}if(document.querySelector(".questions__form")&&document.querySelector(".questions__form-clear").addEventListener("click",()=>{document.querySelector(".questions__form").reset()}),document.querySelector(".login__form")){i=document.querySelector(".login__form"),e=i.querySelectorAll("input[required]");const C=i.querySelector("[name='email']"),h=i.querySelector("[name='password']"),g=i.querySelector("[name='agreePersonal']"),D=i.querySelector("[type='submit']");validEmail(C,D,a),validInput(h,"",D,a),validCheckbox(g,D,a),D.classList.add("disabled"),e.forEach(e=>{e.addEventListener("input",()=>{""===h.value||C.parentElement.classList.contains("form__input-invalid")||!1===g.value?D.classList.add("disabled"):D.classList.remove("disabled")})}),D.addEventListener("click",()=>{""===h.value&&(h.parentElement.classList.add("form__input-invalid"),h.parentElement.parentElement.querySelector(".form__error").style.display="block",h.parentElement.parentElement.querySelector(".form__error").textContent=a[0]),""===C.value?(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[0]):-1===C.value.indexOf("@")&&(C.parentElement.classList.add("form__input-invalid"),C.parentElement.parentElement.querySelector(".form__error").style.display="block",C.parentElement.parentElement.querySelector(".form__error").textContent=a[1]),!1===g.checked&&g.parentElement.classList.add("form__input-invalid")})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInZhbGlkSW5wdXQiLCJpbnB1dCIsInJlcyIsInNlbGVjdG9yIiwiZXJyb3JzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkRW1haWwiLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInBhc3NWYWxpZCIsImlucHV0Q29uZiIsInZhbGlkUGhvbmUiLCJpc05hTiIsInZhbGlkQ2hlY2tib3giLCJjaGVja2VkIiwiZG9jdW1lbnQiLCJidXJnZXIiLCJtZW51SXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51IiwiY29va2llc0FsZXJ0IiwiY29va2llc0FsZXJ0Q2xvc2UiLCJsZXQiLCJhY2Nlc0Zvcm0iLCJpbnB1dEFsbCIsImlucHV0TmFtZSIsImlucHV0SWluIiwiaW5wdXRFbWFpbCIsImlucHV0UGhvbmUiLCJpbnB1dFBhc3MiLCJpbnB1dENvbmZpcm1QYXNzIiwiaW5wdXRPZmVydCIsImlucHV0UGVyc29uYWwiLCJidG4iLCJmb3JFYWNoIiwiZWwiLCJjb250YWlucyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInFGb3JtIiwiaW5wdXRzQWxsIiwiaW5wdXRFbWFsaSIsImlucHV0TWVzc2FnZSIsInRvZ2dsZSIsImNvb2tpZSIsImZvcm1SZWNvdmVyeSIsImZvcm1SZWNvdmVyeUVtYWlsIiwiZm9ybVJlY292ZXJ5QWdyZWUiLCJmb3JtUmVjb3ZlcnlCdG4iLCJyZXNldCIsImxvZ2luIiwibG9naW5BbGwiLCJsb2dpbkVtYWlsIiwibG9naW5QYXNzIiwibG9naW5QZXJzb25hbCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBQUEsV0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUgsRUFBQUksaUJBQUEsUUFBQSxLQUNBSixFQUFBSyxRQUFBSixHQUNBRCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxDQUNBLENBRUEsU0FBQUMsV0FBQWQsRUFBQUUsRUFBQUMsR0FDQUgsRUFBQUksaUJBQUEsUUFBQSxLQUNBLENBQUEsSUFBQUosRUFBQUssTUFBQVUsUUFBQSxHQUFBLEdBQ0FDLFFBQUFDLElBQUFqQixFQUFBTSxjQUFBQSxhQUFBLEVBQ0FOLEVBQUFNLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0FULEVBQUFNLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBQ0FILEVBQUFNLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQVYsRUFBQVMsVUFBQUMsSUFBQSxVQUFBLElBRUFaLEVBQUFNLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FULEVBQUFNLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFFQSxDQUFBLENBQ0EsQ0FFQSxTQUFBSyxVQUFBbEIsRUFBQW1CLEVBQUFqQixFQUFBQyxHQUNBZ0IsRUFBQWYsaUJBQUEsUUFBQSxLQUNBWSxRQUFBQyxJQUFBRSxFQUFBZCxNQUFBLElBQUFMLEVBQUFLLEtBQUEsRUFDQSxLQUFBYyxFQUFBZCxPQUNBYyxFQUFBYixjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVSxFQUFBYixjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBZ0IsRUFBQWIsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBVixFQUFBUyxVQUFBQyxJQUFBLFVBQUEsR0FDQVosRUFBQUssUUFBQWMsRUFBQWQsT0FBQWMsRUFBQWQsUUFBQUwsRUFBQUssT0FDQWMsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQVUsRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsR0FDQWdCLEVBQUFiLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQVYsRUFBQVMsVUFBQUMsSUFBQSxVQUFBLElBRUFaLEVBQUFNLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FULEVBQUFNLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFDQU0sRUFBQWIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsT0FDQVUsRUFBQWIsY0FBQUssVUFBQUUsT0FBQSxxQkFBQSxFQUVBLENBQUEsRUFDQWIsRUFBQUksaUJBQUEsUUFBQSxLQUNBWSxRQUFBQyxJQUFBRSxFQUFBZCxNQUFBLElBQUFMLEVBQUFLLEtBQUEsRUFDQSxLQUFBTCxFQUFBSyxPQUNBTCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxHQUNBTyxFQUFBZCxRQUFBTCxFQUFBSyxPQUFBTCxFQUFBSyxRQUFBYyxFQUFBZCxPQUNBTCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBQ0FNLEVBQUFiLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLE9BQ0FVLEVBQUFiLGNBQUFLLFVBQUFFLE9BQUEscUJBQUEsRUFFQSxDQUFBLENBQ0EsQ0FFQSxTQUFBTyxXQUFBcEIsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUgsRUFBQUksaUJBQUEsUUFBQSxLQUNBSixFQUFBSyxRQUFBSixHQUNBRCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxHQUNBUyxNQUFBckIsRUFBQUssS0FBQSxHQUNBTCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBVCxFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUNBSCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxJQUVBWixFQUFBTSxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxPQUNBVCxFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxDQUVBLENBRUEsU0FBQVMsY0FBQXRCLEVBQUFDLEVBQUFDLEdBQ0FGLEVBQUFJLGlCQUFBLFFBQUEsS0FDQUosRUFBQXVCLFVBQUF0QixHQUNBRCxFQUFBTSxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FWLEVBQUFTLFVBQUFDLElBQUEsVUFBQSxHQUVBWixFQUFBTSxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLENBRUEsQ0FBQSxDQUNBLENBRUFXLFNBQUFwQixpQkFBQSxtQkFBQSxXQUVBLE1BQUFxQixFQUFBRCxTQUFBakIsY0FBQSxpQkFBQSxFQUNBLElBQUFtQixFQUFBRixTQUFBRyxpQkFBQSxvQkFBQSxFQUNBLE1BQUFDLEVBQUFKLFNBQUFqQixjQUFBLGVBQUEsRUFDQXNCLEVBQUFMLFNBQUFqQixjQUFBLGdCQUFBLEVBQ0EsSUFBQXVCLEVBQUFOLFNBQUFqQixjQUFBLHFCQUFBLEVBQ0F3QixJQUFBNUIsRUFBQSxDQUFBLG9CQUFBLDJDQUFBLG1CQUFBLDBCQUFBLHlCQUVBLEdBQUFxQixTQUFBakIsY0FBQSxlQUFBLEVBQUEsQ0FDQSxJQUFBeUIsRUFBQVIsU0FBQWpCLGNBQUEsZUFBQSxFQUNBMEIsRUFBQUQsRUFBQUwsaUJBQUEsT0FBQSxFQUNBLE1BQUFPLEVBQUFGLEVBQUF6QixjQUFBLHNCQUFBLEVBQ0E0QixFQUFBSCxFQUFBekIsY0FBQSxjQUFBLEVBQ0E2QixFQUFBSixFQUFBekIsY0FBQSxnQkFBQSxFQUNBOEIsRUFBQUwsRUFBQXpCLGNBQUEsZ0JBQUEsRUFDQStCLEVBQUFOLEVBQUF6QixjQUFBLG1CQUFBLEVBQ0FnQyxFQUFBUCxFQUFBekIsY0FBQSwwQkFBQSxFQUNBaUMsRUFBQVIsRUFBQXpCLGNBQUEscUJBQUEsRUFDQWtDLEVBQUFULEVBQUF6QixjQUFBLHdCQUFBLEVBQ0FtQyxFQUFBVixFQUFBekIsY0FBQSxpQkFBQSxFQUVBbUMsRUFBQS9CLFVBQUFDLElBQUEsVUFBQSxFQUVBYixXQUFBbUMsRUFBQSxHQUFBUSxFQUFBdkMsQ0FBQSxFQUNBaUIsV0FBQWUsRUFBQSxHQUFBTyxFQUFBdkMsQ0FBQSxFQUNBVyxXQUFBc0IsRUFBQU0sRUFBQXZDLENBQUEsRUFDQWlCLFdBQUFpQixFQUFBLEdBQUFLLEVBQUF2QyxDQUFBLEVBQ0FlLFVBQUFvQixFQUFBQyxFQUFBRyxFQUFBdkMsQ0FBQSxFQUNBSixXQUFBd0MsRUFBQSxHQUFBRyxFQUFBdkMsQ0FBQSxFQUNBbUIsY0FBQWtCLEVBQUEsQ0FBQSxFQUFBRSxDQUFBLEVBQ0FwQixjQUFBbUIsRUFBQSxDQUFBLEVBQUFDLENBQUEsRUFFQVQsRUFBQVUsUUFBQUMsSUFDQUEsRUFBQXhDLGlCQUFBLFFBQUEsS0FDQThCLEVBQUE1QixjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxHQUFBLEtBQUFYLEVBQUE3QixPQUVBNkIsRUFBQTVCLGNBQUFLLFVBQUFrQyxTQUFBLHFCQUFBLEdBQUEsS0FBQVgsRUFBQTdCLE9BRUErQixFQUFBOUIsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FBQSxLQUFBVCxFQUFBL0IsT0FFQWdDLEVBQUEvQixjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxHQUFBLEtBQUFSLEVBQUFoQyxPQUVBaUMsRUFBQWhDLGNBQUFLLFVBQUFrQyxTQUFBLHFCQUFBLEdBQUEsS0FBQVAsRUFBQWpDLE9BRUFrQyxFQUFBakMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FBQSxLQUFBTixFQUFBbEMsT0FFQW1DLEVBQUFsQyxjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxHQUFBLEtBQUFMLEVBQUFuQyxPQUVBb0MsRUFBQW5DLGNBQUFLLFVBQUFrQyxTQUFBLHFCQUFBLEdBQUEsS0FBQUosRUFBQXBDLE1BQ0FxQyxFQUFBL0IsVUFBQUMsSUFBQSxVQUFBLEVBRUE4QixFQUFBL0IsVUFBQUUsT0FBQSxVQUFBLENBR0EsQ0FBQSxDQUNBLENBQUEsRUFFQW1CLEVBQUE1QixpQkFBQSxTQUFBLElBQ0E4QixFQUFBNUIsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBYixFQUFBNUIsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBWCxFQUFBOUIsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBVixFQUFBL0IsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBVCxFQUFBaEMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBUixFQUFBakMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBUCxFQUFBbEMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxFQUVBTixFQUFBbkMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FDQUMsRUFBQUMsZUFBQSxDQUVBLENBQUEsRUFFQUwsRUFBQXRDLGlCQUFBLFFBQUEsS0FDQSxLQUFBOEIsRUFBQTdCLFFBQ0E2QixFQUFBNUIsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBc0IsRUFBQTVCLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0F5QixFQUFBNUIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxLQUFBZ0MsRUFBQTlCLFFBQ0E4QixFQUFBN0IsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBdUIsRUFBQTdCLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0EwQixFQUFBN0IsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxDQUFBLElBQUFpQyxFQUFBL0IsTUFBQVUsUUFBQSxHQUFBLElBQ0FxQixFQUFBOUIsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBd0IsRUFBQTlCLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0EyQixFQUFBOUIsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxLQUFBa0MsRUFBQWhDLFFBQ0FnQyxFQUFBL0IsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBeUIsRUFBQS9CLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0E0QixFQUFBL0IsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxLQUFBbUMsRUFBQWpDLFFBQ0FpQyxFQUFBaEMsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBMEIsRUFBQWhDLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0E2QixFQUFBaEMsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxLQUFBb0MsRUFBQWxDLFFBQ0FrQyxFQUFBakMsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBMkIsRUFBQWpDLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBQyxNQUFBQyxRQUFBLFFBQ0E4QixFQUFBakMsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFHLFlBQUFQLEVBQUEsSUFFQSxDQUFBLElBQUFxQyxFQUFBakIsU0FDQWlCLEVBQUFsQyxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBRUEsQ0FBQSxJQUFBNkIsRUFBQWxCLFNBQ0FrQixFQUFBbkMsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxDQUVBLENBQUEsQ0FDQSxDQUVBLEdBQUFZLFNBQUFqQixjQUFBLGtCQUFBLEVBQUEsQ0FDQXlDLEVBQUF4QixTQUFBakIsY0FBQSxrQkFBQSxFQUNBMEMsRUFBQUQsRUFBQXJCLGlCQUFBLE9BQUEsRUFDQSxNQUFBTyxFQUFBYyxFQUFBekMsY0FBQSxzQkFBQSxFQUNBMkMsRUFBQUYsRUFBQXpDLGNBQUEsZ0JBQUEsRUFDQWtDLEVBQUFPLEVBQUF6QyxjQUFBLHdCQUFBLEVBQ0E0QyxFQUFBSCxFQUFBekMsY0FBQSxrQkFBQSxFQUNBbUMsRUFBQU0sRUFBQXpDLGNBQUEsaUJBQUEsRUFFQVIsV0FBQW1DLEVBQUEsR0FBQVEsRUFBQXZDLENBQUEsRUFDQVcsV0FBQW9DLEVBQUFSLEVBQUF2QyxDQUFBLEVBQ0FKLFdBQUFvRCxFQUFBLEdBQUFULEVBQUF2QyxDQUFBLEVBQ0FtQixjQUFBbUIsRUFBQSxDQUFBLEVBQUFDLENBQUEsRUFFQU8sRUFBQU4sUUFBQUMsSUFDQUEsRUFBQXhDLGlCQUFBLFFBQUEsS0FDQThCLEVBQUE1QixjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxHQUVBSyxFQUFBNUMsY0FBQUssVUFBQWtDLFNBQUEscUJBQUEsR0FFQUosRUFBQW5DLGNBQUFLLFVBQUFrQyxTQUFBLHFCQUFBLEdBRUFNLEVBQUE3QyxjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxFQUNBSCxFQUFBL0IsVUFBQUMsSUFBQSxVQUFBLEVBR0E4QixFQUFBL0IsVUFBQUUsT0FBQSxVQUFBLENBRUEsQ0FBQSxDQUNBLENBQUEsRUFFQTZCLEVBQUEvQixVQUFBQyxJQUFBLFVBQUEsRUFFQThCLEVBQUF0QyxpQkFBQSxRQUFBLEtBQ0EsS0FBQThCLEVBQUE3QixRQUNBNkIsRUFBQTVCLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQXNCLEVBQUE1QixjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBeUIsRUFBQTVCLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLElBRUEsS0FBQStDLEVBQUE3QyxPQUNBNkMsRUFBQTVDLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQXNDLEVBQUE1QyxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBeUMsRUFBQTVDLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLElBQ0EsQ0FBQSxJQUFBK0MsRUFBQTdDLE1BQUFVLFFBQUEsR0FBQSxJQUNBbUMsRUFBQTVDLGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQXNDLEVBQUE1QyxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBeUMsRUFBQTVDLGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLElBRUEsQ0FBQSxJQUFBc0MsRUFBQWxCLFNBQ0FrQixFQUFBbkMsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUVBLEtBQUF1QyxFQUFBOUMsUUFDQThDLEVBQUE3QyxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0F1QyxFQUFBN0MsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQTBDLEVBQUE3QyxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxHQUVBLENBQUEsQ0FFQSxDQXVCQSxHQXJCQXNCLEVBQUFyQixpQkFBQSxRQUFBLEtBQ0FxQixFQUFBZCxVQUFBeUMsT0FBQSxRQUFBLEVBQ0F4QixFQUFBakIsVUFBQXlDLE9BQUEsUUFBQSxDQUNBLENBQUEsRUFFQTFCLEVBQUFpQixRQUFBQyxJQUNBQSxFQUFBeEMsaUJBQUEsUUFBQSxLQUNBcUIsRUFBQWQsVUFBQXlDLE9BQUEsUUFBQSxFQUNBeEIsRUFBQWpCLFVBQUF5QyxPQUFBLFFBQUEsQ0FDQSxDQUFBLENBQ0EsQ0FBQSxFQUVBNUIsU0FBQTZCLE9BQUF0QyxRQUFBLFVBQUEsRUFBQSxHQUNBYyxFQUFBbEIsVUFBQUMsSUFBQSxRQUFBLEVBR0FrQixFQUFBMUIsaUJBQUEsUUFBQSxLQUNBeUIsRUFBQWxCLFVBQUFFLE9BQUEsUUFBQSxFQUNBVyxTQUFBNkIsT0FBQSxlQUNBLENBQUEsRUFFQTdCLFNBQUFqQixjQUFBLFdBQUEsRUFBQSxDQUNBK0MsRUFBQTlCLFNBQUFqQixjQUFBLFdBQUEsRUFDQSxNQUFBZ0QsRUFBQUQsRUFBQS9DLGNBQUEsZ0JBQUEsRUFDQWlELEVBQUFGLEVBQUEvQyxjQUFBLHdCQUFBLEVBQ0FrRCxFQUFBSCxFQUFBL0MsY0FBQSxnQkFBQSxFQUVBa0QsRUFBQTlDLFVBQUFDLElBQUEsVUFBQSxFQUdBRSxXQUFBeUMsRUFBQUUsRUFBQXRELENBQUEsRUFDQW1CLGNBQUFrQyxFQUFBQyxFQUFBdEQsQ0FBQSxFQUVBbUQsRUFBQTNCLGlCQUFBLE9BQUEsRUFBQWdCLFFBQUFDLElBQ0FBLEVBQUF4QyxpQkFBQSxRQUFBLEtBQ0EsQ0FBQSxJQUFBbUQsRUFBQWxELE1BQUFVLFFBQUEsR0FBQSxHQUdBLENBQUEsSUFBQXlDLEVBQUFqQyxTQUNBZ0MsRUFBQWpELGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQTZDLEVBQUE5QyxVQUFBQyxJQUFBLFVBQUEsR0FFQTZDLEVBQUE5QyxVQUFBRSxPQUFBLFVBQUEsQ0FFQSxDQUFBLENBQ0EsQ0FBQSxFQUNBeUMsRUFBQWxELGlCQUFBLFNBQUEsSUFDQW1ELEVBQUFsRCxNQUFBVSxRQUFBLEdBQUEsR0FBQSxHQUNBd0MsRUFBQWpELGNBQUFLLFVBQUFDLElBQUEscUJBQUEsRUFDQTJDLEVBQUFqRCxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUMsTUFBQUMsUUFBQSxRQUNBOEMsRUFBQWpELGNBQUFBLGNBQUFDLGNBQUEsY0FBQSxFQUFBRyxZQUFBUCxFQUFBLEdBQ0EyQyxFQUFBQyxlQUFBLEdBRUFRLEVBQUFqRCxjQUFBSyxVQUFBRSxPQUFBLHFCQUFBLEVBRUEsQ0FBQSxJQUFBMkMsRUFBQWpDLFNBQ0FpQyxFQUFBbEQsY0FBQUssVUFBQUMsSUFBQSxxQkFBQSxFQUNBa0MsRUFBQUMsZUFBQSxHQUVBUSxFQUFBakQsY0FBQUssVUFBQUUsT0FBQSxxQkFBQSxDQUVBLENBQUEsQ0FDQSxDQVFBLEdBTkFXLFNBQUFqQixjQUFBLGtCQUFBLEdBQ0FpQixTQUFBakIsY0FBQSx3QkFBQSxFQUFBSCxpQkFBQSxRQUFBLEtBQ0FvQixTQUFBakIsY0FBQSxrQkFBQSxFQUFBbUQsTUFBQSxDQUNBLENBQUEsRUFHQWxDLFNBQUFqQixjQUFBLGNBQUEsRUFBQSxDQUNBb0QsRUFBQW5DLFNBQUFqQixjQUFBLGNBQUEsRUFDQXFELEVBQUFELEVBQUFoQyxpQkFBQSxpQkFBQSxFQUNBLE1BQUFrQyxFQUFBRixFQUFBcEQsY0FBQSxnQkFBQSxFQUNBdUQsRUFBQUgsRUFBQXBELGNBQUEsbUJBQUEsRUFDQXdELEVBQUFKLEVBQUFwRCxjQUFBLHdCQUFBLEVBQ0FtQyxFQUFBaUIsRUFBQXBELGNBQUEsaUJBQUEsRUFFQU8sV0FBQStDLEVBQUFuQixFQUFBdkMsQ0FBQSxFQUNBSixXQUFBK0QsRUFBQSxHQUFBcEIsRUFBQXZDLENBQUEsRUFDQW1CLGNBQUF5QyxFQUFBckIsRUFBQXZDLENBQUEsRUFFQXVDLEVBQUEvQixVQUFBQyxJQUFBLFVBQUEsRUFFQWdELEVBQUFqQixRQUFBQyxJQUNBQSxFQUFBeEMsaUJBQUEsUUFBQSxLQUNBLEtBQUEwRCxFQUFBekQsT0FFQXdELEVBQUF2RCxjQUFBSyxVQUFBa0MsU0FBQSxxQkFBQSxHQUVBLENBQUEsSUFBQWtCLEVBQUExRCxNQUNBcUMsRUFBQS9CLFVBQUFDLElBQUEsVUFBQSxFQUVBOEIsRUFBQS9CLFVBQUFFLE9BQUEsVUFBQSxDQUVBLENBQUEsQ0FDQSxDQUFBLEVBRUE2QixFQUFBdEMsaUJBQUEsUUFBQSxLQUNBLEtBQUEwRCxFQUFBekQsUUFDQXlELEVBQUF4RCxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FrRCxFQUFBeEQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQXFELEVBQUF4RCxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxJQUVBLEtBQUEwRCxFQUFBeEQsT0FDQXdELEVBQUF2RCxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FpRCxFQUFBdkQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQW9ELEVBQUF2RCxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxJQUNBLENBQUEsSUFBQTBELEVBQUF4RCxNQUFBVSxRQUFBLEdBQUEsSUFDQThDLEVBQUF2RCxjQUFBSyxVQUFBQyxJQUFBLHFCQUFBLEVBQ0FpRCxFQUFBdkQsY0FBQUEsY0FBQUMsY0FBQSxjQUFBLEVBQUFDLE1BQUFDLFFBQUEsUUFDQW9ELEVBQUF2RCxjQUFBQSxjQUFBQyxjQUFBLGNBQUEsRUFBQUcsWUFBQVAsRUFBQSxJQUlBLENBQUEsSUFBQTRELEVBQUF4QyxTQUNBd0MsRUFBQXpELGNBQUFLLFVBQUFDLElBQUEscUJBQUEsQ0FFQSxDQUFBLENBQ0EsQ0FJQSxDQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHZhbGlkSW5wdXQgKGlucHV0LCByZXMsIHNlbGVjdG9yLCBlcnJvcnMpIHtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSByZXMpIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZEVtYWlsKGlucHV0LCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZS5pbmRleE9mKFwiQFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KVxyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhc3NWYWxpZCAoaW5wdXQsIGlucHV0Q29uZiwgc2VsZWN0b3IsIGVycm9ycykge1xyXG4gICAgaW5wdXRDb25mLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW5wdXRDb25mLnZhbHVlICsgJyAnICsgaW5wdXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChpbnB1dENvbmYudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUgIT09IGlucHV0Q29uZi52YWx1ZSB8fCBpbnB1dENvbmYudmFsdWUgIT09IGlucHV0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzNdO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIGlucHV0Q29uZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpbnB1dENvbmYudmFsdWUgKyAnICcgKyBpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0Q29uZi52YWx1ZSAhPT0gaW5wdXQudmFsdWUgfHwgaW5wdXQudmFsdWUgIT09IGlucHV0Q29uZi52YWx1ZSkge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbM107XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBpbnB1dENvbmYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgaW5wdXRDb25mLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRQaG9uZShpbnB1dCwgcmVzLCBzZWxlY3RvciwgZXJyb3JzKSB7XHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gcmVzKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNOYU4oaW5wdXQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1s0XTtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkQ2hlY2tib3goaW5wdXQsIHJlcywgc2VsZWN0b3IpIHtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgPT09IHJlcykge1xyXG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICBzZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19idXJnZXJcIik7XHJcbiAgICBjb25zdCBtZW51SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyX19tZW51LWl0ZW1cIik7XHJcbiAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21lbnVcIik7XHJcbiAgICBjb25zdCBjb29raWVzQWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZXMtYWxlcnRcIik7XHJcbiAgICBjb25zdCBjb29raWVzQWxlcnRDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llcy1hbGVydF9fYnRuXCIpO1xyXG4gICAgbGV0IGVycm9ycyA9IFsn0J/QvtC70LUg0L3QtSDQt9Cw0L/QvtC70L3QtdC90L4nLCBcItCS0JLQldCU0JjQotCVINCS0JDQqCBFLU1BSUwg0JIg0J/QoNCQ0JLQmNCb0KzQndCe0Jwg0KTQntCg0JzQkNCi0JUuXCIsIFwi0J3QtdC60L7RgNGA0LXQutGC0L3Ri9C5INCY0JjQnVwiLCBcItCf0LDRgNC+0LvQuCDQtNC+0LvQttC90Ysg0YHQvtCy0L/QsNC00LDRgtGMXCIsIFwi0J3QtdC60L7RgNGA0LXQutGC0L3QvtC1INC30L3QsNGH0LXQvdC40LVcIl07XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNjZXNzX19mb3JtXCIpKSB7XHJcbiAgICAgICAgY29uc3QgYWNjZXNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2Nlc3NfX2Zvcm1cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRBbGwgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpXHJcbiAgICAgICAgY29uc3QgaW5wdXROYW1lID0gYWNjZXNGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nY29tcGFueU5hbWUnXVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dElpbiA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2lpbiddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0RW1haWwgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdlbWFpbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UGhvbmUgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdwaG9uZSddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UGFzcyA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRDb25maXJtUGFzcyA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2NvbmZpcm1QYXNzd29yZCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0T2ZlcnQgPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhZ3JlZU9mZXJ0J11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQZXJzb25hbCA9IGFjY2VzRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImFncmVlUGVyc29uYWxcIl0nKTtcclxuICAgICAgICBjb25zdCBidG4gPSBhY2Nlc0Zvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuXHJcbiAgICAgICAgdmFsaWRJbnB1dChpbnB1dE5hbWUsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRQaG9uZShpbnB1dElpbiwgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZEVtYWlsKGlucHV0RW1haWwsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZFBob25lKGlucHV0UGhvbmUsICcnLCBidG4sIGVycm9ycyk7XHJcbiAgICAgICAgcGFzc1ZhbGlkKGlucHV0UGFzcywgaW5wdXRDb25maXJtUGFzcywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkSW5wdXQoaW5wdXRDb25maXJtUGFzcywgJycsIGJ0biwgZXJyb3JzKTtcclxuICAgICAgICB2YWxpZENoZWNrYm94KGlucHV0T2ZlcnQsIGZhbHNlLCBidG4pO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3goaW5wdXRQZXJzb25hbCwgZmFsc2UsIGJ0bik7XHJcblxyXG4gICAgICAgIGlucHV0QWxsLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSB8fCBpbnB1dE5hbWUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpIHx8IGlucHV0TmFtZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpIHx8IGlucHV0RW1haWwudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFBob25lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSB8fCBpbnB1dFBob25lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRQYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSB8fCBpbnB1dFBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dENvbmZpcm1QYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSB8fCBpbnB1dENvbmZpcm1QYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRPZmVydC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikgfHwgaW5wdXRPZmVydC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0UGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpIHx8IGlucHV0UGVyc29uYWwudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWNjZXNGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dEVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBob25lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0Q29uZmlybVBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0T2ZlcnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlucHV0TmFtZS52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dElpbi52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0SWluLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dElpbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0SWluLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dEVtYWlsLnZhbHVlLmluZGV4T2YoXCJAXCIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGhvbmUudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBob25lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBob25lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQaG9uZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRQYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRQYXNzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGlmIChpbnB1dENvbmZpcm1QYXNzLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRDb25maXJtUGFzcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRDb25maXJtUGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0Q29uZmlybVBhc3MucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGlmIChpbnB1dE9mZXJ0LmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE9mZXJ0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGVyc29uYWwuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0UGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpKSB7XHJcbiAgICAgICAgY29uc3QgcUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fZm9ybVwiKTtcclxuICAgICAgICBjb25zdCBpbnB1dHNBbGwgPSBxRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXROYW1lID0gcUZvcm0ucXVlcnlTZWxlY3RvcihcIltuYW1lPSdjb21wYW55TmFtZSddXCIpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0RW1hbGkgPSBxRm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2VtYWlsJ11cIik7XHJcbiAgICAgICAgY29uc3QgaW5wdXRQZXJzb25hbCA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiYWdyZWVQZXJzb25hbFwiXScpO1xyXG4gICAgICAgIGNvbnN0IGlucHV0TWVzc2FnZSA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwibWVzc2FnZVwiXScpO1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IHFGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nc3VibWl0J11cIik7XHJcblxyXG4gICAgICAgIHZhbGlkSW5wdXQoaW5wdXROYW1lLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkRW1haWwoaW5wdXRFbWFsaSwgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkSW5wdXQoaW5wdXRNZXNzYWdlLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3goaW5wdXRQZXJzb25hbCwgZmFsc2UsIGJ0bik7XHJcblxyXG4gICAgICAgIGlucHV0c0FsbC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dE5hbWUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFBlcnNvbmFsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0TWVzc2FnZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXROYW1lLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0RW1hbGkudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVtYWxpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dEVtYWxpLnZhbHVlLmluZGV4T2YoXCJAXCIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbWFsaS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGlucHV0RW1hbGkucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0UGVyc29uYWwuY2hlY2tlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0UGVyc29uYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRNZXNzYWdlLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRNZXNzYWdlLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE1lc3NhZ2UucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE1lc3NhZ2UucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikudGV4dENvbnRlbnQgPSBlcnJvcnNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtZW51SXRlbS5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZihcImNvb2tpZU9uXCIpIDwgMCkge1xyXG4gICAgICAgIGNvb2tpZXNBbGVydC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvb2tpZXNBbGVydENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY29va2llc0FsZXJ0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gXCJjb29raWVPbj10cnVlXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWNvdmVyeVwiKSkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1SZWNvdmVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVjb3ZlcnlcIik7XHJcbiAgICAgICAgY29uc3QgZm9ybVJlY292ZXJ5RW1haWwgPSBmb3JtUmVjb3ZlcnkucXVlcnlTZWxlY3RvcihcIlt0eXBlPSdlbWFpbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1SZWNvdmVyeUFncmVlID0gZm9ybVJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYWdyZWVQZXJzb25hbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1SZWNvdmVyeUJ0biA9IGZvcm1SZWNvdmVyeS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9J3N1Ym1pdCdcIik7XHJcblxyXG4gICAgICAgIGZvcm1SZWNvdmVyeUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG5cclxuICAgICAgICB2YWxpZEVtYWlsKGZvcm1SZWNvdmVyeUVtYWlsLCBmb3JtUmVjb3ZlcnlCdG4sIGVycm9ycyk7XHJcbiAgICAgICAgdmFsaWRDaGVja2JveChmb3JtUmVjb3ZlcnlBZ3JlZSwgZm9ybVJlY292ZXJ5QnRuLCBlcnJvcnMpO1xyXG5cclxuICAgICAgICBmb3JtUmVjb3ZlcnkucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm1SZWNvdmVyeUVtYWlsLnZhbHVlLmluZGV4T2YoXCJAXCIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5QnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihmb3JtUmVjb3ZlcnlBZ3JlZS5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5QnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIGZvcm1SZWNvdmVyeS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmb3JtUmVjb3ZlcnlFbWFpbC52YWx1ZS5pbmRleE9mKFwiQFwiKSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlFbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcm1SZWNvdmVyeUVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvcm1SZWNvdmVyeUFncmVlLmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtUmVjb3ZlcnlBZ3JlZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9ybVJlY292ZXJ5RW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fZm9ybVwiKSkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtLWNsZWFyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucXVlc3Rpb25zX19mb3JtXCIpLnJlc2V0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2dpbl9fZm9ybVwiKSkge1xyXG4gICAgICAgIGNvbnN0IGxvZ2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2dpbl9fZm9ybVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpbkFsbCA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtyZXF1aXJlZF1cIik7XHJcbiAgICAgICAgY29uc3QgbG9naW5FbWFpbCA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgICAgICBjb25zdCBsb2dpblBhc3MgPSBsb2dpbi5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICAgICAgY29uc3QgbG9naW5QZXJzb25hbCA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYWdyZWVQZXJzb25hbCddXCIpO1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGxvZ2luLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT0nc3VibWl0J11cIik7XHJcblxyXG4gICAgICAgIHZhbGlkRW1haWwobG9naW5FbWFpbCwgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkSW5wdXQobG9naW5QYXNzLCAnJywgYnRuLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhbGlkQ2hlY2tib3gobG9naW5QZXJzb25hbCwgYnRuLCBlcnJvcnMpO1xyXG5cclxuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cclxuICAgICAgICBsb2dpbkFsbC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChsb2dpblBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm1fX2lucHV0LWludmFsaWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2dpblBlcnNvbmFsLnZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsb2dpblBhc3MudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpblBhc3MucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGFzcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobG9naW5FbWFpbC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtaW52YWxpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luRW1haWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZXJyb3JcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnRleHRDb250ZW50ID0gZXJyb3JzWzBdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvZ2luRW1haWwudmFsdWUuaW5kZXhPZihcIkBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWludmFsaWRcIik7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkVtYWlsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2Vycm9yXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbG9naW5FbWFpbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19lcnJvclwiKS50ZXh0Q29udGVudCA9IGVycm9yc1sxXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobG9naW5QZXJzb25hbC5jaGVja2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgbG9naW5QZXJzb25hbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG5cclxufSk7Il19
